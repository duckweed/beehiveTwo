/*C3*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CONNECT USER SA
alter table circle_office_holders drop constraint FKB871C913B69A4B4D
alter table circle_office_holders drop constraint FKB871C9135F8642ED
alter table circle_persons drop constraint FK202A634F5F8642ED
alter table circle_persons drop constraint FK202A634F9E203460
alter table officer_holder drop constraint FKACD788D57B4D92BF
alter table officer_holder drop constraint FKACD788D57E57324E
alter table person_circles drop constraint FK970BFAB98B73FFF7
alter table person_circles drop constraint FK970BFAB9DF4463C0
drop table circle if exists
drop table circle_office_holders if exists
drop table circle_persons if exists
drop table officer if exists
drop table officer_holder if exists
drop table person if exists
drop table person_circles if exists
create table circle (id bigint generated by default as identity (start with 1), description varchar(1024) not null, name varchar(50) not null, version integer, primary key (id))
create table circle_office_holders (circle bigint not null, office_holders bigint not null, primary key (circle, office_holders))
create table circle_persons (circle bigint not null, persons bigint not null, primary key (circle, persons))
create table officer (id bigint generated by default as identity (start with 1), title varchar(20) not null, description varchar(20), responsibility varchar(1024), version integer, primary key (id))
create table officer_holder (officer bigint not null, holder bigint not null, primary key (officer, holder))
create table person (id bigint generated by default as identity (start with 1), bio varchar(1024), email varchar(255), first_name varchar(255), last_name varchar(255), openid_identifier varchar(255), password varchar(255), user_role integer not null, username varchar(20) not null, version integer, primary key (id), unique (username))
create table person_circles (person bigint not null, circles bigint not null, primary key (person, circles))
alter table circle_office_holders add constraint FKB871C913B69A4B4D foreign key (office_holders) references officer
alter table circle_office_holders add constraint FKB871C9135F8642ED foreign key (circle) references circle
alter table circle_persons add constraint FK202A634F5F8642ED foreign key (circle) references circle
alter table circle_persons add constraint FK202A634F9E203460 foreign key (persons) references person
alter table officer_holder add constraint FKACD788D57B4D92BF foreign key (officer) references officer
alter table officer_holder add constraint FKACD788D57E57324E foreign key (holder) references person
alter table person_circles add constraint FK970BFAB98B73FFF7 foreign key (person) references person
alter table person_circles add constraint FK970BFAB9DF4463C0 foreign key (circles) references circle
